################################################################################
# Splunk OpenTelemetry Collector Configuration
# Updated for latest chart version (native OTel log collection)
# GKE Autopilot deployment for Minecraft Bedrock Server
################################################################################

################################################################################
# Cluster identification
# This value will be associated with all telemetry data as "k8s.cluster.name"
################################################################################
clusterName: "minecraft-cluster"

################################################################################
# Cloud provider and Kubernetes distribution
################################################################################
cloudProvider: "gcp"
distribution: "gke/autopilot"

################################################################################
# Splunk Platform (Enterprise/Cloud) Configuration
################################################################################
splunkPlatform:
  # REQUIRED: Update with your actual Splunk HEC endpoint
  # Format: "http://YOUR_SPLUNK_IP:8088/services/collector/event"
  # Note: Use /services/collector/event endpoint for proper field extraction
  endpoint: "http://YOUR_SPLUNK_IP:8088/services/collector/event"
  
  # REQUIRED: Update with your actual Splunk HEC token
  # Generate this in Splunk: Settings > Data Inputs > HTTP Event Collector
  token: "YOUR_HEC_TOKEN_HERE"
  
  # Splunk indexes
  index: "main"
  # Uncomment and set if you enable metrics collection
  # metricsIndex: "metrics"
  
  # Source metadata
  source: "kubernetes"
  sourcetype: ""
  
  # Telemetry data types to collect
  logsEnabled: true
  metricsEnabled: false  # Set to true when ready to collect metrics
  tracesEnabled: false
  
  # Connection settings
  maxConnections: 200
  disableCompression: true
  timeout: 10s
  insecureSkipVerify: false
  
  # Retry configuration
  retryOnFailure:
    enabled: true
    initialInterval: 5s
    maxInterval: 30s
    maxElapsedTime: 300s
  
  # Queue configuration (updated for latest chart)
  sendingQueue:
    enabled: true
    numConsumers: 10
    queueSize: 1000  # Reduced from 5000 per latest recommendations

################################################################################
# Native OpenTelemetry Log Collection
# Replaces deprecated fluentd configuration
################################################################################
logsCollection:
  # Container logs collection
  containers:
    enabled: true
    # Exclude the OTel agent's own logs from collection
    excludeAgentLogs: true
    # Add paths to exclude specific pods/containers if needed
    # Example: excludePaths: ["/var/log/pods/kube-system_*/*/*.log"]
    excludePaths: []
    # Maximum size for recombined log messages (1MB default)
    maxRecombineLogSize: 1048576
